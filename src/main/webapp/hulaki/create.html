<body>
<link data-lift="head" rel="stylesheet" type='text/css' href="/classpath/fobo/bootstrap.css"/>
<link data-lift="head" rel="stylesheet" type='text/css' href="/classpath/fobo/bootstrap-responsive.css"/>
<link data-lift="head" rel="stylesheet" href="/classpath/fobo/font-awesome.css">

<style>
    #request  { white-space: pre; font-family: monospace; font-size:12px ; color : green}
    #response { white-space: pre; font-family: monospace; font-size:11px ; color : blue}
</style>

<div id="fobo-main" class="lift:surround?with=libo/default;at=content">

    <div>
        <form class="lift:form.ajax">
            <input class="lift:HulakiController" id="request" style="width: 800px;"/>
            <input class="btn btn-primary" type="submit" value="Request">
        </form>
    </div>

    <div class="lift:comet?type=HulakiListener">
        <textarea id="response" style="width: 800px; height: 500px"></textarea>

    </div>

</div>
<script id="jquery" src="/classpath/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    // <![CDATA[

    $('#response').on('change keyup paste', function() {
        console.log("[info] : response keyup")
        format();
    });

    function format(){
        var json = $( '#response' ).val()
        var j = JSON.stringify( JSON.parse(json) , null, 4)
        console.log("[info] : formattng json" + j)
        $('#response').html(j)
    };

    $(document).ready(function(){
        console.log("[info] : hulaki js is ready.")
    });
    //]]>
</script>

</body>
